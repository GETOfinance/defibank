{"id":"e0db48752702fc193654a814de9e3509","_format":"hh-sol-build-info-1","solcVersion":"0.8.30","solcLongVersion":"0.8.30+commit.73712a01","input":{"language":"Solidity","sources":{"contracts/OrbitalMathHelperEVM.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.20;\n\n/**\n * @title OrbitalMathHelperEVM\n * @notice EVM Solidity implementation of the math helper used by OrbitalPool\n * @dev Matches the IOrbitalMathHelper interface expected by IntegratedOrbital.sol\n *      Provides a spherical-invariant based approximation that is safe on EVM.\n *      Returns 0 on any invalid/unsafe condition so the caller can fallback.\n */\ncontract OrbitalMathHelperEVM {\n    /**\n     * @notice Calculates the radius of a tick from its reserves\n     * @dev Returns floor(sqrt(sum(reserve_i^2))) with basic overflow guards\n     */\n    function calculateRadius(uint256[] memory reserves) external pure returns (uint256) {\n        if (reserves.length == 0) return 0;\n        unchecked {\n            uint256 sumSquares = 0;\n            for (uint256 i = 0; i < reserves.length; i++) {\n                uint256 x = reserves[i];\n                if (x != 0 && x > type(uint256).max / x) return 0; // overflow guard for x*x\n                uint256 xsq = x * x;\n                if (sumSquares > type(uint256).max - xsq) return 0; // overflow guard for sum\n                sumSquares += xsq;\n            }\n            return _sqrt(sumSquares);\n        }\n    }\n\n    /**\n     * @notice Calculates the s value for a boundary tick\n     * @dev Simple approximation: use radius as s (kept for ABI compatibility)\n     */\n    function calculateBoundaryTickS(uint256 r, uint256 /*k*/ ) external pure returns (uint256) {\n        return r;\n    }\n\n    /**\n     * @notice Solves the (approximate) invariant to calculate swap output amount\n     * @dev ABI must match exactly the signature used by OrbitalPool low-level call\n     *      Unused parameters are kept for ABI compatibility and future extensions.\n     */\n    function solveTorusInvariant(\n        uint256 sum_interior_reserves,\n        uint256 interior_consolidated_radius,\n        uint256 boundary_consolidated_radius,\n        uint256 boundary_total_k_bound,\n        uint256[] memory total_reserves,\n        uint256 token_in_index,\n        uint256 token_out_index,\n        uint256 amount_in_after_fee\n    ) external pure returns (uint256) {\n        // Silence unused warnings (ABI compatibility)\n        (sum_interior_reserves, interior_consolidated_radius, boundary_consolidated_radius, boundary_total_k_bound);\n\n        // Basic validations\n        if (total_reserves.length == 0) return 0;\n        if (token_in_index >= total_reserves.length) return 0;\n        if (token_out_index >= total_reserves.length) return 0;\n        if (token_in_index == token_out_index) return 0;\n\n        uint256 rIn = total_reserves[token_in_index];\n        uint256 rOut = total_reserves[token_out_index];\n        uint256 dx = amount_in_after_fee;\n\n        if (dx == 0 || rIn == 0 || rOut == 0) return 0;\n\n        // Preserve K = ||r||^2 while increasing rIn by dx and decreasing rOut by dy:\n        // 2*rIn*dx + dx^2 = 2*rOut*dy - dy^2  =>  dy = rOut - sqrt(rOut^2 - (2*rIn*dx + dx^2))\n\n        // Compute rOut^2 with overflow guard\n        uint256 rOutSquared;\n        unchecked {\n            if (rOut != 0 && rOut > type(uint256).max / rOut) return 0;\n            rOutSquared = rOut * rOut;\n        }\n\n        // Compute prod = rIn * dx with overflow guard\n        uint256 prod;\n        unchecked {\n            if (dx != 0 && rIn > type(uint256).max / dx) return 0;\n            prod = rIn * dx;\n        }\n\n        // Compute twoRInDx = 2 * prod with overflow guard\n        uint256 twoRInDx;\n        unchecked {\n            if (prod > type(uint256).max / 2) return 0;\n            twoRInDx = prod * 2;\n        }\n\n        // Compute dx^2 with overflow guard\n        uint256 dxSquared;\n        unchecked {\n            if (dx != 0 && dx > type(uint256).max / dx) return 0;\n            dxSquared = dx * dx;\n        }\n\n        // sum = 2*rIn*dx + dx^2; must be <= rOut^2\n        uint256 sum;\n        unchecked {\n            if (twoRInDx > type(uint256).max - dxSquared) return 0;\n            sum = twoRInDx + dxSquared;\n        }\n        if (sum >= rOutSquared) return 0;\n\n        // radicand = rOut^2 - sum\n        uint256 radicand = rOutSquared - sum;\n        uint256 sqrtVal = _sqrt(radicand);\n        if (sqrtVal >= rOut) return 0; // numerical guard\n\n        uint256 dy = rOut - sqrtVal;\n        if (dy == 0 || dy >= rOut) return 0;\n        return dy;\n    }\n\n    // Babylonian method for integer square root\n    function _sqrt(uint256 x) internal pure returns (uint256) {\n        if (x == 0) return 0;\n        uint256 z = (x + 1) / 2;\n        uint256 y = x;\n        while (z < y) {\n            y = z;\n            z = (x / z + z) / 2;\n        }\n        return y;\n    }\n}\n\n"}},"settings":{"optimizer":{"enabled":true,"runs":200},"viaIR":true,"evmVersion":"paris","outputSelection":{"*":{"*":["abi","evm.bytecode","evm.deployedBytecode","evm.methodIdentifiers","metadata"],"":["ast"]}}}},"output":{"sources":{"contracts/OrbitalMathHelperEVM.sol":{"ast":{"absolutePath":"contracts/OrbitalMathHelperEVM.sol","exportedSymbols":{"OrbitalMathHelperEVM":[399]},"id":400,"license":"MIT","nodeType":"SourceUnit","nodes":[{"id":1,"literals":["solidity","^","0.8",".20"],"nodeType":"PragmaDirective","src":"32:24:0"},{"abstract":false,"baseContracts":[],"canonicalName":"OrbitalMathHelperEVM","contractDependencies":[],"contractKind":"contract","documentation":{"id":2,"nodeType":"StructuredDocumentation","src":"58:357:0","text":" @title OrbitalMathHelperEVM\n @notice EVM Solidity implementation of the math helper used by OrbitalPool\n @dev Matches the IOrbitalMathHelper interface expected by IntegratedOrbital.sol\n      Provides a spherical-invariant based approximation that is safe on EVM.\n      Returns 0 on any invalid/unsafe condition so the caller can fallback."},"fullyImplemented":true,"id":399,"linearizedBaseContracts":[399],"name":"OrbitalMathHelperEVM","nameLocation":"425:20:0","nodeType":"ContractDefinition","nodes":[{"body":{"id":84,"nodeType":"Block","src":"694:529:0","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":14,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":11,"name":"reserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6,"src":"708:8:0","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":12,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"717:6:0","memberName":"length","nodeType":"MemberAccess","src":"708:15:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":13,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"727:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"708:20:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":17,"nodeType":"IfStatement","src":"704:34:0","trueBody":{"expression":{"hexValue":"30","id":15,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"737:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":10,"id":16,"nodeType":"Return","src":"730:8:0"}},{"id":83,"nodeType":"UncheckedBlock","src":"748:469:0","statements":[{"assignments":[19],"declarations":[{"constant":false,"id":19,"mutability":"mutable","name":"sumSquares","nameLocation":"780:10:0","nodeType":"VariableDeclaration","scope":83,"src":"772:18:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":18,"name":"uint256","nodeType":"ElementaryTypeName","src":"772:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":21,"initialValue":{"hexValue":"30","id":20,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"793:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"772:22:0"},{"body":{"id":77,"nodeType":"Block","src":"854:315:0","statements":[{"assignments":[34],"declarations":[{"constant":false,"id":34,"mutability":"mutable","name":"x","nameLocation":"880:1:0","nodeType":"VariableDeclaration","scope":77,"src":"872:9:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":33,"name":"uint256","nodeType":"ElementaryTypeName","src":"872:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":38,"initialValue":{"baseExpression":{"id":35,"name":"reserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6,"src":"884:8:0","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":37,"indexExpression":{"id":36,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":23,"src":"893:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"884:11:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"872:23:0"},{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":51,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":41,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":39,"name":"x","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34,"src":"917:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":40,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"922:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"917:6:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"&&","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":50,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":42,"name":"x","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34,"src":"927:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":49,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"arguments":[{"id":45,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"936:7:0","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":44,"name":"uint256","nodeType":"ElementaryTypeName","src":"936:7:0","typeDescriptions":{}}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"}],"id":43,"name":"type","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-27,"src":"931:4:0","typeDescriptions":{"typeIdentifier":"t_function_metatype_pure$__$returns$__$","typeString":"function () pure"}},"id":46,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"931:13:0","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_magic_meta_type_t_uint256","typeString":"type(uint256)"}},"id":47,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"945:3:0","memberName":"max","nodeType":"MemberAccess","src":"931:17:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":48,"name":"x","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34,"src":"951:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"931:21:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"927:25:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"917:35:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54,"nodeType":"IfStatement","src":"913:49:0","trueBody":{"expression":{"hexValue":"30","id":52,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"961:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":10,"id":53,"nodeType":"Return","src":"954:8:0"}},{"assignments":[56],"declarations":[{"constant":false,"id":56,"mutability":"mutable","name":"xsq","nameLocation":"1014:3:0","nodeType":"VariableDeclaration","scope":77,"src":"1006:11:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55,"name":"uint256","nodeType":"ElementaryTypeName","src":"1006:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":60,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":59,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":57,"name":"x","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34,"src":"1020:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":58,"name":"x","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34,"src":"1024:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1020:5:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"1006:19:0"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":69,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":61,"name":"sumSquares","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":19,"src":"1047:10:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":68,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"arguments":[{"id":64,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1065:7:0","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":63,"name":"uint256","nodeType":"ElementaryTypeName","src":"1065:7:0","typeDescriptions":{}}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"}],"id":62,"name":"type","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-27,"src":"1060:4:0","typeDescriptions":{"typeIdentifier":"t_function_metatype_pure$__$returns$__$","typeString":"function () pure"}},"id":65,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1060:13:0","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_magic_meta_type_t_uint256","typeString":"type(uint256)"}},"id":66,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"1074:3:0","memberName":"max","nodeType":"MemberAccess","src":"1060:17:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":67,"name":"xsq","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":56,"src":"1080:3:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1060:23:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1047:36:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":72,"nodeType":"IfStatement","src":"1043:50:0","trueBody":{"expression":{"hexValue":"30","id":70,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1092:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":10,"id":71,"nodeType":"Return","src":"1085:8:0"}},{"expression":{"id":75,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":73,"name":"sumSquares","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":19,"src":"1137:10:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":74,"name":"xsq","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":56,"src":"1151:3:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1137:17:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":76,"nodeType":"ExpressionStatement","src":"1137:17:0"}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":29,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":26,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":23,"src":"828:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"expression":{"id":27,"name":"reserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6,"src":"832:8:0","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":28,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"841:6:0","memberName":"length","nodeType":"MemberAccess","src":"832:15:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"828:19:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":78,"initializationExpression":{"assignments":[23],"declarations":[{"constant":false,"id":23,"mutability":"mutable","name":"i","nameLocation":"821:1:0","nodeType":"VariableDeclaration","scope":78,"src":"813:9:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":22,"name":"uint256","nodeType":"ElementaryTypeName","src":"813:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":25,"initialValue":{"hexValue":"30","id":24,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"825:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"813:13:0"},"isSimpleCounterLoop":true,"loopExpression":{"expression":{"id":31,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"++","prefix":false,"src":"849:3:0","subExpression":{"id":30,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":23,"src":"849:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":32,"nodeType":"ExpressionStatement","src":"849:3:0"},"nodeType":"ForStatement","src":"808:361:0"},{"expression":{"arguments":[{"id":80,"name":"sumSquares","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":19,"src":"1195:10:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":79,"name":"_sqrt","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":398,"src":"1189:5:0","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256) pure returns (uint256)"}},"id":81,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1189:17:0","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":10,"id":82,"nodeType":"Return","src":"1182:24:0"}]}]},"documentation":{"id":3,"nodeType":"StructuredDocumentation","src":"452:153:0","text":" @notice Calculates the radius of a tick from its reserves\n @dev Returns floor(sqrt(sum(reserve_i^2))) with basic overflow guards"},"functionSelector":"50272f1c","id":85,"implemented":true,"kind":"function","modifiers":[],"name":"calculateRadius","nameLocation":"619:15:0","nodeType":"FunctionDefinition","parameters":{"id":7,"nodeType":"ParameterList","parameters":[{"constant":false,"id":6,"mutability":"mutable","name":"reserves","nameLocation":"652:8:0","nodeType":"VariableDeclaration","scope":85,"src":"635:25:0","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[]"},"typeName":{"baseType":{"id":4,"name":"uint256","nodeType":"ElementaryTypeName","src":"635:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5,"nodeType":"ArrayTypeName","src":"635:9:0","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_storage_ptr","typeString":"uint256[]"}},"visibility":"internal"}],"src":"634:27:0"},"returnParameters":{"id":10,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":85,"src":"685:7:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8,"name":"uint256","nodeType":"ElementaryTypeName","src":"685:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"684:9:0"},"scope":399,"src":"610:613:0","stateMutability":"pure","virtual":false,"visibility":"external"},{"body":{"id":97,"nodeType":"Block","src":"1473:25:0","statements":[{"expression":{"id":95,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":88,"src":"1490:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":94,"id":96,"nodeType":"Return","src":"1483:8:0"}]},"documentation":{"id":86,"nodeType":"StructuredDocumentation","src":"1229:148:0","text":" @notice Calculates the s value for a boundary tick\n @dev Simple approximation: use radius as s (kept for ABI compatibility)"},"functionSelector":"6bec96e0","id":98,"implemented":true,"kind":"function","modifiers":[],"name":"calculateBoundaryTickS","nameLocation":"1391:22:0","nodeType":"FunctionDefinition","parameters":{"id":91,"nodeType":"ParameterList","parameters":[{"constant":false,"id":88,"mutability":"mutable","name":"r","nameLocation":"1422:1:0","nodeType":"VariableDeclaration","scope":98,"src":"1414:9:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":87,"name":"uint256","nodeType":"ElementaryTypeName","src":"1414:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":90,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":98,"src":"1425:7:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":89,"name":"uint256","nodeType":"ElementaryTypeName","src":"1425:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1413:27:0"},"returnParameters":{"id":94,"nodeType":"ParameterList","parameters":[{"constant":false,"id":93,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":98,"src":"1464:7:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":92,"name":"uint256","nodeType":"ElementaryTypeName","src":"1464:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1463:9:0"},"scope":399,"src":"1382:116:0","stateMutability":"pure","virtual":false,"visibility":"external"},{"body":{"id":348,"nodeType":"Block","src":"2151:2202:0","statements":[{"expression":{"components":[{"id":121,"name":"sum_interior_reserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":101,"src":"2217:21:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":122,"name":"interior_consolidated_radius","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103,"src":"2240:28:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":123,"name":"boundary_consolidated_radius","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":105,"src":"2270:28:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":124,"name":"boundary_total_k_bound","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":107,"src":"2300:22:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":125,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2216:107:0","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,uint256)"}},"id":126,"nodeType":"ExpressionStatement","src":"2216:107:0"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":130,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":127,"name":"total_reserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":110,"src":"2367:14:0","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":128,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2382:6:0","memberName":"length","nodeType":"MemberAccess","src":"2367:21:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":129,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2392:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"2367:26:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":133,"nodeType":"IfStatement","src":"2363:40:0","trueBody":{"expression":{"hexValue":"30","id":131,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2402:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":120,"id":132,"nodeType":"Return","src":"2395:8:0"}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":137,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":134,"name":"token_in_index","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":112,"src":"2417:14:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"expression":{"id":135,"name":"total_reserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":110,"src":"2435:14:0","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":136,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2450:6:0","memberName":"length","nodeType":"MemberAccess","src":"2435:21:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2417:39:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":140,"nodeType":"IfStatement","src":"2413:53:0","trueBody":{"expression":{"hexValue":"30","id":138,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2465:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":120,"id":139,"nodeType":"Return","src":"2458:8:0"}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":144,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":141,"name":"token_out_index","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":114,"src":"2480:15:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"expression":{"id":142,"name":"total_reserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":110,"src":"2499:14:0","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":143,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2514:6:0","memberName":"length","nodeType":"MemberAccess","src":"2499:21:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2480:40:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":147,"nodeType":"IfStatement","src":"2476:54:0","trueBody":{"expression":{"hexValue":"30","id":145,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2529:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":120,"id":146,"nodeType":"Return","src":"2522:8:0"}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":150,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":148,"name":"token_in_index","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":112,"src":"2544:14:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"id":149,"name":"token_out_index","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":114,"src":"2562:15:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2544:33:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":153,"nodeType":"IfStatement","src":"2540:47:0","trueBody":{"expression":{"hexValue":"30","id":151,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2586:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":120,"id":152,"nodeType":"Return","src":"2579:8:0"}},{"assignments":[155],"declarations":[{"constant":false,"id":155,"mutability":"mutable","name":"rIn","nameLocation":"2606:3:0","nodeType":"VariableDeclaration","scope":348,"src":"2598:11:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":154,"name":"uint256","nodeType":"ElementaryTypeName","src":"2598:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":159,"initialValue":{"baseExpression":{"id":156,"name":"total_reserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":110,"src":"2612:14:0","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":158,"indexExpression":{"id":157,"name":"token_in_index","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":112,"src":"2627:14:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2612:30:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2598:44:0"},{"assignments":[161],"declarations":[{"constant":false,"id":161,"mutability":"mutable","name":"rOut","nameLocation":"2660:4:0","nodeType":"VariableDeclaration","scope":348,"src":"2652:12:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":160,"name":"uint256","nodeType":"ElementaryTypeName","src":"2652:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":165,"initialValue":{"baseExpression":{"id":162,"name":"total_reserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":110,"src":"2667:14:0","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":164,"indexExpression":{"id":163,"name":"token_out_index","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":114,"src":"2682:15:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2667:31:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2652:46:0"},{"assignments":[167],"declarations":[{"constant":false,"id":167,"mutability":"mutable","name":"dx","nameLocation":"2716:2:0","nodeType":"VariableDeclaration","scope":348,"src":"2708:10:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":166,"name":"uint256","nodeType":"ElementaryTypeName","src":"2708:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":169,"initialValue":{"id":168,"name":"amount_in_after_fee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":116,"src":"2721:19:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2708:32:0"},{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":180,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":176,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":172,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":170,"name":"dx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":167,"src":"2755:2:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":171,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2761:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"2755:7:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":175,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":173,"name":"rIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":155,"src":"2766:3:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":174,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2773:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"2766:8:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"2755:19:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":179,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":177,"name":"rOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":161,"src":"2778:4:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":178,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2786:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"2778:9:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"2755:32:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":183,"nodeType":"IfStatement","src":"2751:46:0","trueBody":{"expression":{"hexValue":"30","id":181,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2796:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":120,"id":182,"nodeType":"Return","src":"2789:8:0"}},{"assignments":[185],"declarations":[{"constant":false,"id":185,"mutability":"mutable","name":"rOutSquared","nameLocation":"3045:11:0","nodeType":"VariableDeclaration","scope":348,"src":"3037:19:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":184,"name":"uint256","nodeType":"ElementaryTypeName","src":"3037:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":186,"nodeType":"VariableDeclarationStatement","src":"3037:19:0"},{"id":209,"nodeType":"UncheckedBlock","src":"3066:132:0","statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":199,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":189,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":187,"name":"rOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":161,"src":"3094:4:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":188,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3102:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"3094:9:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"&&","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":198,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":190,"name":"rOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":161,"src":"3107:4:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":197,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"arguments":[{"id":193,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3119:7:0","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":192,"name":"uint256","nodeType":"ElementaryTypeName","src":"3119:7:0","typeDescriptions":{}}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"}],"id":191,"name":"type","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-27,"src":"3114:4:0","typeDescriptions":{"typeIdentifier":"t_function_metatype_pure$__$returns$__$","typeString":"function () pure"}},"id":194,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3114:13:0","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_magic_meta_type_t_uint256","typeString":"type(uint256)"}},"id":195,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3128:3:0","memberName":"max","nodeType":"MemberAccess","src":"3114:17:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":196,"name":"rOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":161,"src":"3134:4:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3114:24:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3107:31:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"3094:44:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":202,"nodeType":"IfStatement","src":"3090:58:0","trueBody":{"expression":{"hexValue":"30","id":200,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3147:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":120,"id":201,"nodeType":"Return","src":"3140:8:0"}},{"expression":{"id":207,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":203,"name":"rOutSquared","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":185,"src":"3162:11:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":206,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":204,"name":"rOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":161,"src":"3176:4:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":205,"name":"rOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":161,"src":"3183:4:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3176:11:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3162:25:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":208,"nodeType":"ExpressionStatement","src":"3162:25:0"}]},{"assignments":[211],"declarations":[{"constant":false,"id":211,"mutability":"mutable","name":"prod","nameLocation":"3271:4:0","nodeType":"VariableDeclaration","scope":348,"src":"3263:12:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":210,"name":"uint256","nodeType":"ElementaryTypeName","src":"3263:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":212,"nodeType":"VariableDeclarationStatement","src":"3263:12:0"},{"id":235,"nodeType":"UncheckedBlock","src":"3285:117:0","statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":225,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":215,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":213,"name":"dx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":167,"src":"3313:2:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":214,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3319:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"3313:7:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"&&","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":224,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":216,"name":"rIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":155,"src":"3324:3:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":223,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"arguments":[{"id":219,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3335:7:0","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":218,"name":"uint256","nodeType":"ElementaryTypeName","src":"3335:7:0","typeDescriptions":{}}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"}],"id":217,"name":"type","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-27,"src":"3330:4:0","typeDescriptions":{"typeIdentifier":"t_function_metatype_pure$__$returns$__$","typeString":"function () pure"}},"id":220,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3330:13:0","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_magic_meta_type_t_uint256","typeString":"type(uint256)"}},"id":221,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3344:3:0","memberName":"max","nodeType":"MemberAccess","src":"3330:17:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":222,"name":"dx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":167,"src":"3350:2:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3330:22:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3324:28:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"3313:39:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":228,"nodeType":"IfStatement","src":"3309:53:0","trueBody":{"expression":{"hexValue":"30","id":226,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3361:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":120,"id":227,"nodeType":"Return","src":"3354:8:0"}},{"expression":{"id":233,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":229,"name":"prod","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":211,"src":"3376:4:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":232,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":230,"name":"rIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":155,"src":"3383:3:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":231,"name":"dx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":167,"src":"3389:2:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3383:8:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3376:15:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":234,"nodeType":"ExpressionStatement","src":"3376:15:0"}]},{"assignments":[237],"declarations":[{"constant":false,"id":237,"mutability":"mutable","name":"twoRInDx","nameLocation":"3479:8:0","nodeType":"VariableDeclaration","scope":348,"src":"3471:16:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":236,"name":"uint256","nodeType":"ElementaryTypeName","src":"3471:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":238,"nodeType":"VariableDeclarationStatement","src":"3471:16:0"},{"id":257,"nodeType":"UncheckedBlock","src":"3497:110:0","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":247,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":239,"name":"prod","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":211,"src":"3525:4:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":246,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"leftExpression":{"expression":{"arguments":[{"id":242,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3537:7:0","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":241,"name":"uint256","nodeType":"ElementaryTypeName","src":"3537:7:0","typeDescriptions":{}}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"}],"id":240,"name":"type","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-27,"src":"3532:4:0","typeDescriptions":{"typeIdentifier":"t_function_metatype_pure$__$returns$__$","typeString":"function () pure"}},"id":243,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3532:13:0","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_magic_meta_type_t_uint256","typeString":"type(uint256)"}},"id":244,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3546:3:0","memberName":"max","nodeType":"MemberAccess","src":"3532:17:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"hexValue":"32","id":245,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3552:1:0","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"3532:21:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3525:28:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":250,"nodeType":"IfStatement","src":"3521:42:0","trueBody":{"expression":{"hexValue":"30","id":248,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3562:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":120,"id":249,"nodeType":"Return","src":"3555:8:0"}},{"expression":{"id":255,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":251,"name":"twoRInDx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":237,"src":"3577:8:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":254,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":252,"name":"prod","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":211,"src":"3588:4:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"32","id":253,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3595:1:0","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"3588:8:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3577:19:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":256,"nodeType":"ExpressionStatement","src":"3577:19:0"}]},{"assignments":[259],"declarations":[{"constant":false,"id":259,"mutability":"mutable","name":"dxSquared","nameLocation":"3669:9:0","nodeType":"VariableDeclaration","scope":348,"src":"3661:17:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":258,"name":"uint256","nodeType":"ElementaryTypeName","src":"3661:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":260,"nodeType":"VariableDeclarationStatement","src":"3661:17:0"},{"id":283,"nodeType":"UncheckedBlock","src":"3688:120:0","statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":273,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":263,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":261,"name":"dx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":167,"src":"3716:2:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":262,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3722:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"3716:7:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"&&","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":272,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":264,"name":"dx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":167,"src":"3727:2:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":271,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"arguments":[{"id":267,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3737:7:0","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":266,"name":"uint256","nodeType":"ElementaryTypeName","src":"3737:7:0","typeDescriptions":{}}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"}],"id":265,"name":"type","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-27,"src":"3732:4:0","typeDescriptions":{"typeIdentifier":"t_function_metatype_pure$__$returns$__$","typeString":"function () pure"}},"id":268,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3732:13:0","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_magic_meta_type_t_uint256","typeString":"type(uint256)"}},"id":269,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3746:3:0","memberName":"max","nodeType":"MemberAccess","src":"3732:17:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":270,"name":"dx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":167,"src":"3752:2:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3732:22:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3727:27:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"3716:38:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":276,"nodeType":"IfStatement","src":"3712:52:0","trueBody":{"expression":{"hexValue":"30","id":274,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3763:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":120,"id":275,"nodeType":"Return","src":"3756:8:0"}},{"expression":{"id":281,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":277,"name":"dxSquared","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":259,"src":"3778:9:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":280,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":278,"name":"dx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":167,"src":"3790:2:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":279,"name":"dx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":167,"src":"3795:2:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3790:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3778:19:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":282,"nodeType":"ExpressionStatement","src":"3778:19:0"}]},{"assignments":[285],"declarations":[{"constant":false,"id":285,"mutability":"mutable","name":"sum","nameLocation":"3878:3:0","nodeType":"VariableDeclaration","scope":348,"src":"3870:11:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":284,"name":"uint256","nodeType":"ElementaryTypeName","src":"3870:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":286,"nodeType":"VariableDeclarationStatement","src":"3870:11:0"},{"id":305,"nodeType":"UncheckedBlock","src":"3891:129:0","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":295,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":287,"name":"twoRInDx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":237,"src":"3919:8:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":294,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"arguments":[{"id":290,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3935:7:0","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":289,"name":"uint256","nodeType":"ElementaryTypeName","src":"3935:7:0","typeDescriptions":{}}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"}],"id":288,"name":"type","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-27,"src":"3930:4:0","typeDescriptions":{"typeIdentifier":"t_function_metatype_pure$__$returns$__$","typeString":"function () pure"}},"id":291,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3930:13:0","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_magic_meta_type_t_uint256","typeString":"type(uint256)"}},"id":292,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3944:3:0","memberName":"max","nodeType":"MemberAccess","src":"3930:17:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":293,"name":"dxSquared","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":259,"src":"3950:9:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3930:29:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3919:40:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":298,"nodeType":"IfStatement","src":"3915:54:0","trueBody":{"expression":{"hexValue":"30","id":296,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3968:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":120,"id":297,"nodeType":"Return","src":"3961:8:0"}},{"expression":{"id":303,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":299,"name":"sum","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":285,"src":"3983:3:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":302,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":300,"name":"twoRInDx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":237,"src":"3989:8:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":301,"name":"dxSquared","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":259,"src":"4000:9:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3989:20:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3983:26:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":304,"nodeType":"ExpressionStatement","src":"3983:26:0"}]},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":308,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":306,"name":"sum","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":285,"src":"4033:3:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"id":307,"name":"rOutSquared","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":185,"src":"4040:11:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4033:18:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":311,"nodeType":"IfStatement","src":"4029:32:0","trueBody":{"expression":{"hexValue":"30","id":309,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4060:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":120,"id":310,"nodeType":"Return","src":"4053:8:0"}},{"assignments":[313],"declarations":[{"constant":false,"id":313,"mutability":"mutable","name":"radicand","nameLocation":"4115:8:0","nodeType":"VariableDeclaration","scope":348,"src":"4107:16:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":312,"name":"uint256","nodeType":"ElementaryTypeName","src":"4107:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":317,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":316,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":314,"name":"rOutSquared","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":185,"src":"4126:11:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":315,"name":"sum","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":285,"src":"4140:3:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4126:17:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4107:36:0"},{"assignments":[319],"declarations":[{"constant":false,"id":319,"mutability":"mutable","name":"sqrtVal","nameLocation":"4161:7:0","nodeType":"VariableDeclaration","scope":348,"src":"4153:15:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":318,"name":"uint256","nodeType":"ElementaryTypeName","src":"4153:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":323,"initialValue":{"arguments":[{"id":321,"name":"radicand","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":313,"src":"4177:8:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":320,"name":"_sqrt","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":398,"src":"4171:5:0","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256) pure returns (uint256)"}},"id":322,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4171:15:0","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4153:33:0"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":326,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":324,"name":"sqrtVal","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":319,"src":"4200:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"id":325,"name":"rOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":161,"src":"4211:4:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4200:15:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":329,"nodeType":"IfStatement","src":"4196:29:0","trueBody":{"expression":{"hexValue":"30","id":327,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4224:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":120,"id":328,"nodeType":"Return","src":"4217:8:0"}},{"assignments":[331],"declarations":[{"constant":false,"id":331,"mutability":"mutable","name":"dy","nameLocation":"4263:2:0","nodeType":"VariableDeclaration","scope":348,"src":"4255:10:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":330,"name":"uint256","nodeType":"ElementaryTypeName","src":"4255:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":335,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":334,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":332,"name":"rOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":161,"src":"4268:4:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":333,"name":"sqrtVal","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":319,"src":"4275:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4268:14:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4255:27:0"},{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":342,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":338,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":336,"name":"dy","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":331,"src":"4296:2:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":337,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4302:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4296:7:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":341,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":339,"name":"dy","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":331,"src":"4307:2:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"id":340,"name":"rOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":161,"src":"4313:4:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4307:10:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"4296:21:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":345,"nodeType":"IfStatement","src":"4292:35:0","trueBody":{"expression":{"hexValue":"30","id":343,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4326:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":120,"id":344,"nodeType":"Return","src":"4319:8:0"}},{"expression":{"id":346,"name":"dy","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":331,"src":"4344:2:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":120,"id":347,"nodeType":"Return","src":"4337:9:0"}]},"documentation":{"id":99,"nodeType":"StructuredDocumentation","src":"1504:261:0","text":" @notice Solves the (approximate) invariant to calculate swap output amount\n @dev ABI must match exactly the signature used by OrbitalPool low-level call\n      Unused parameters are kept for ABI compatibility and future extensions."},"functionSelector":"19be0803","id":349,"implemented":true,"kind":"function","modifiers":[],"name":"solveTorusInvariant","nameLocation":"1779:19:0","nodeType":"FunctionDefinition","parameters":{"id":117,"nodeType":"ParameterList","parameters":[{"constant":false,"id":101,"mutability":"mutable","name":"sum_interior_reserves","nameLocation":"1816:21:0","nodeType":"VariableDeclaration","scope":349,"src":"1808:29:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":100,"name":"uint256","nodeType":"ElementaryTypeName","src":"1808:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":103,"mutability":"mutable","name":"interior_consolidated_radius","nameLocation":"1855:28:0","nodeType":"VariableDeclaration","scope":349,"src":"1847:36:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102,"name":"uint256","nodeType":"ElementaryTypeName","src":"1847:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":105,"mutability":"mutable","name":"boundary_consolidated_radius","nameLocation":"1901:28:0","nodeType":"VariableDeclaration","scope":349,"src":"1893:36:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":104,"name":"uint256","nodeType":"ElementaryTypeName","src":"1893:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":107,"mutability":"mutable","name":"boundary_total_k_bound","nameLocation":"1947:22:0","nodeType":"VariableDeclaration","scope":349,"src":"1939:30:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":106,"name":"uint256","nodeType":"ElementaryTypeName","src":"1939:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":110,"mutability":"mutable","name":"total_reserves","nameLocation":"1996:14:0","nodeType":"VariableDeclaration","scope":349,"src":"1979:31:0","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[]"},"typeName":{"baseType":{"id":108,"name":"uint256","nodeType":"ElementaryTypeName","src":"1979:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":109,"nodeType":"ArrayTypeName","src":"1979:9:0","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_storage_ptr","typeString":"uint256[]"}},"visibility":"internal"},{"constant":false,"id":112,"mutability":"mutable","name":"token_in_index","nameLocation":"2028:14:0","nodeType":"VariableDeclaration","scope":349,"src":"2020:22:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":111,"name":"uint256","nodeType":"ElementaryTypeName","src":"2020:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":114,"mutability":"mutable","name":"token_out_index","nameLocation":"2060:15:0","nodeType":"VariableDeclaration","scope":349,"src":"2052:23:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":113,"name":"uint256","nodeType":"ElementaryTypeName","src":"2052:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":116,"mutability":"mutable","name":"amount_in_after_fee","nameLocation":"2093:19:0","nodeType":"VariableDeclaration","scope":349,"src":"2085:27:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":115,"name":"uint256","nodeType":"ElementaryTypeName","src":"2085:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1798:320:0"},"returnParameters":{"id":120,"nodeType":"ParameterList","parameters":[{"constant":false,"id":119,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":349,"src":"2142:7:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":118,"name":"uint256","nodeType":"ElementaryTypeName","src":"2142:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2141:9:0"},"scope":399,"src":"1770:2583:0","stateMutability":"pure","virtual":false,"visibility":"external"},{"body":{"id":397,"nodeType":"Block","src":"4466:197:0","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":358,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":356,"name":"x","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":351,"src":"4480:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":357,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4485:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4480:6:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":361,"nodeType":"IfStatement","src":"4476:20:0","trueBody":{"expression":{"hexValue":"30","id":359,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4495:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":355,"id":360,"nodeType":"Return","src":"4488:8:0"}},{"assignments":[363],"declarations":[{"constant":false,"id":363,"mutability":"mutable","name":"z","nameLocation":"4514:1:0","nodeType":"VariableDeclaration","scope":397,"src":"4506:9:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":362,"name":"uint256","nodeType":"ElementaryTypeName","src":"4506:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":370,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":369,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":366,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":364,"name":"x","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":351,"src":"4519:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"31","id":365,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4523:1:0","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"4519:5:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":367,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"4518:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"hexValue":"32","id":368,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4528:1:0","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"4518:11:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4506:23:0"},{"assignments":[372],"declarations":[{"constant":false,"id":372,"mutability":"mutable","name":"y","nameLocation":"4547:1:0","nodeType":"VariableDeclaration","scope":397,"src":"4539:9:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":371,"name":"uint256","nodeType":"ElementaryTypeName","src":"4539:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":374,"initialValue":{"id":373,"name":"x","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":351,"src":"4551:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4539:13:0"},{"body":{"id":393,"nodeType":"Block","src":"4576:63:0","statements":[{"expression":{"id":380,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":378,"name":"y","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":372,"src":"4590:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":379,"name":"z","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":363,"src":"4594:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4590:5:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":381,"nodeType":"ExpressionStatement","src":"4590:5:0"},{"expression":{"id":391,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":382,"name":"z","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":363,"src":"4609:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":390,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":387,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":385,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":383,"name":"x","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":351,"src":"4614:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":384,"name":"z","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":363,"src":"4618:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4614:5:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":386,"name":"z","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":363,"src":"4622:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4614:9:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":388,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"4613:11:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"hexValue":"32","id":389,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4627:1:0","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"4613:15:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4609:19:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":392,"nodeType":"ExpressionStatement","src":"4609:19:0"}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":377,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":375,"name":"z","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":363,"src":"4569:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":376,"name":"y","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":372,"src":"4573:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4569:5:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":394,"nodeType":"WhileStatement","src":"4562:77:0"},{"expression":{"id":395,"name":"y","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":372,"src":"4655:1:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":355,"id":396,"nodeType":"Return","src":"4648:8:0"}]},"id":398,"implemented":true,"kind":"function","modifiers":[],"name":"_sqrt","nameLocation":"4417:5:0","nodeType":"FunctionDefinition","parameters":{"id":352,"nodeType":"ParameterList","parameters":[{"constant":false,"id":351,"mutability":"mutable","name":"x","nameLocation":"4431:1:0","nodeType":"VariableDeclaration","scope":398,"src":"4423:9:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":350,"name":"uint256","nodeType":"ElementaryTypeName","src":"4423:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"4422:11:0"},"returnParameters":{"id":355,"nodeType":"ParameterList","parameters":[{"constant":false,"id":354,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":398,"src":"4457:7:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":353,"name":"uint256","nodeType":"ElementaryTypeName","src":"4457:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"4456:9:0"},"scope":399,"src":"4408:255:0","stateMutability":"pure","virtual":false,"visibility":"internal"}],"scope":400,"src":"416:4249:0","usedErrors":[],"usedEvents":[]}],"src":"32:4635:0"},"id":0}},"contracts":{"contracts/OrbitalMathHelperEVM.sol":{"OrbitalMathHelperEVM":{"abi":[{"inputs":[{"internalType":"uint256","name":"r","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"calculateBoundaryTickS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"uint256[]","name":"reserves","type":"uint256[]"}],"name":"calculateRadius","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"uint256","name":"sum_interior_reserves","type":"uint256"},{"internalType":"uint256","name":"interior_consolidated_radius","type":"uint256"},{"internalType":"uint256","name":"boundary_consolidated_radius","type":"uint256"},{"internalType":"uint256","name":"boundary_total_k_bound","type":"uint256"},{"internalType":"uint256[]","name":"total_reserves","type":"uint256[]"},{"internalType":"uint256","name":"token_in_index","type":"uint256"},{"internalType":"uint256","name":"token_out_index","type":"uint256"},{"internalType":"uint256","name":"amount_in_after_fee","type":"uint256"}],"name":"solveTorusInvariant","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"}],"evm":{"bytecode":{"functionDebugData":{},"generatedSources":[],"linkReferences":{},"object":"60808060405234601557610433908161001b8239f35b600080fdfe6080604052600436101561001257600080fd5b60003560e01c806319be0803146100a257806350272f1c1461005f57636bec96e01461003d57600080fd5b3461005a57604036600319011261005a5760206040516004358152f35b600080fd5b3461005a57602036600319011261005a5760043567ffffffffffffffff811161005a5761009a61009560209236906004016100ea565b61033d565b604051908152f35b3461005a5761010036600319011261005a5760843567ffffffffffffffff811161005a5761009a6100d960209236906004016100ea565b60e4359060c4359060a435906101c8565b9080601f8301121561005a5781359167ffffffffffffffff8311610165578260051b9060405193601f19603f840116850185811067ffffffffffffffff82111761016557604052845260208085019282010192831161005a57602001905b8282106101555750505090565b8135815260209182019101610148565b634e487b7160e01b600052604160045260246000fd5b805182101561018f5760209160051b010190565b634e487b7160e01b600052603260045260246000fd5b919082039182116101b257565b634e487b7160e01b600052601160045260246000fd5b91825180156103105780831015610310578110156102c0578082146102c0576101f46101fb928461017b565b519261017b565b519180159081158281610335575b801561032d575b6103105784158015908161031a575b5061031057848002938184816102fd575b506102f25782026001600160ff1b0381116102f25760011b92816102c9575b506102c057800290811981116102c0570190808210156102b85761027b91610276916101a5565b6103a4565b818110156102b15761028d90826101a5565b9081159081156102a6575b506102a05790565b50600090565b905081101538610298565b5050600090565b505050600090565b50505050600090565b90506102dc57806000190481113861024f565b634e487b7160e01b600052601260045260246000fd5b505050505050600090565b90506102dc578260001904811184610230565b5050505050600090565b90506102dc57846000190485113861021f565b508415610210565b508315610209565b8051156102a0576000805b82518210156103955761035b828461017b565b51801580159081610382575b506102c0578002801982116102c05760019101910190610348565b90506102dc578060001904811138610367565b90506103a191506103a4565b90565b80156102a057600181018082116101b25760011c815b8282106103c657505090565b90915081600081156103e957508082049081018091116101b25760011c906103ba565b634e487b7160e01b81526012600452602490fdfea2646970667358221220b13573b530ebe0b20a9935c39991892d0811aba0e4f1a7c16e2f19ed5fdd80c864736f6c634300081e0033","opcodes":"PUSH1 0x80 DUP1 PUSH1 0x40 MSTORE CALLVALUE PUSH1 0x15 JUMPI PUSH2 0x433 SWAP1 DUP2 PUSH2 0x1B DUP3 CODECOPY RETURN JUMPDEST PUSH1 0x0 DUP1 REVERT INVALID PUSH1 0x80 PUSH1 0x40 MSTORE PUSH1 0x4 CALLDATASIZE LT ISZERO PUSH2 0x12 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST PUSH1 0x0 CALLDATALOAD PUSH1 0xE0 SHR DUP1 PUSH4 0x19BE0803 EQ PUSH2 0xA2 JUMPI DUP1 PUSH4 0x50272F1C EQ PUSH2 0x5F JUMPI PUSH4 0x6BEC96E0 EQ PUSH2 0x3D JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST CALLVALUE PUSH2 0x5A JUMPI PUSH1 0x40 CALLDATASIZE PUSH1 0x3 NOT ADD SLT PUSH2 0x5A JUMPI PUSH1 0x20 PUSH1 0x40 MLOAD PUSH1 0x4 CALLDATALOAD DUP2 MSTORE RETURN JUMPDEST PUSH1 0x0 DUP1 REVERT JUMPDEST CALLVALUE PUSH2 0x5A JUMPI PUSH1 0x20 CALLDATASIZE PUSH1 0x3 NOT ADD SLT PUSH2 0x5A JUMPI PUSH1 0x4 CALLDATALOAD PUSH8 0xFFFFFFFFFFFFFFFF DUP2 GT PUSH2 0x5A JUMPI PUSH2 0x9A PUSH2 0x95 PUSH1 0x20 SWAP3 CALLDATASIZE SWAP1 PUSH1 0x4 ADD PUSH2 0xEA JUMP JUMPDEST PUSH2 0x33D JUMP JUMPDEST PUSH1 0x40 MLOAD SWAP1 DUP2 MSTORE RETURN JUMPDEST CALLVALUE PUSH2 0x5A JUMPI PUSH2 0x100 CALLDATASIZE PUSH1 0x3 NOT ADD SLT PUSH2 0x5A JUMPI PUSH1 0x84 CALLDATALOAD PUSH8 0xFFFFFFFFFFFFFFFF DUP2 GT PUSH2 0x5A JUMPI PUSH2 0x9A PUSH2 0xD9 PUSH1 0x20 SWAP3 CALLDATASIZE SWAP1 PUSH1 0x4 ADD PUSH2 0xEA JUMP JUMPDEST PUSH1 0xE4 CALLDATALOAD SWAP1 PUSH1 0xC4 CALLDATALOAD SWAP1 PUSH1 0xA4 CALLDATALOAD SWAP1 PUSH2 0x1C8 JUMP JUMPDEST SWAP1 DUP1 PUSH1 0x1F DUP4 ADD SLT ISZERO PUSH2 0x5A JUMPI DUP2 CALLDATALOAD SWAP2 PUSH8 0xFFFFFFFFFFFFFFFF DUP4 GT PUSH2 0x165 JUMPI DUP3 PUSH1 0x5 SHL SWAP1 PUSH1 0x40 MLOAD SWAP4 PUSH1 0x1F NOT PUSH1 0x3F DUP5 ADD AND DUP6 ADD DUP6 DUP2 LT PUSH8 0xFFFFFFFFFFFFFFFF DUP3 GT OR PUSH2 0x165 JUMPI PUSH1 0x40 MSTORE DUP5 MSTORE PUSH1 0x20 DUP1 DUP6 ADD SWAP3 DUP3 ADD ADD SWAP3 DUP4 GT PUSH2 0x5A JUMPI PUSH1 0x20 ADD SWAP1 JUMPDEST DUP3 DUP3 LT PUSH2 0x155 JUMPI POP POP POP SWAP1 JUMP JUMPDEST DUP2 CALLDATALOAD DUP2 MSTORE PUSH1 0x20 SWAP2 DUP3 ADD SWAP2 ADD PUSH2 0x148 JUMP JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x41 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST DUP1 MLOAD DUP3 LT ISZERO PUSH2 0x18F JUMPI PUSH1 0x20 SWAP2 PUSH1 0x5 SHL ADD ADD SWAP1 JUMP JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x32 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST SWAP2 SWAP1 DUP3 SUB SWAP2 DUP3 GT PUSH2 0x1B2 JUMPI JUMP JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x11 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST SWAP2 DUP3 MLOAD DUP1 ISZERO PUSH2 0x310 JUMPI DUP1 DUP4 LT ISZERO PUSH2 0x310 JUMPI DUP2 LT ISZERO PUSH2 0x2C0 JUMPI DUP1 DUP3 EQ PUSH2 0x2C0 JUMPI PUSH2 0x1F4 PUSH2 0x1FB SWAP3 DUP5 PUSH2 0x17B JUMP JUMPDEST MLOAD SWAP3 PUSH2 0x17B JUMP JUMPDEST MLOAD SWAP2 DUP1 ISZERO SWAP1 DUP2 ISZERO DUP3 DUP2 PUSH2 0x335 JUMPI JUMPDEST DUP1 ISZERO PUSH2 0x32D JUMPI JUMPDEST PUSH2 0x310 JUMPI DUP5 ISZERO DUP1 ISZERO SWAP1 DUP2 PUSH2 0x31A JUMPI JUMPDEST POP PUSH2 0x310 JUMPI DUP5 DUP1 MUL SWAP4 DUP2 DUP5 DUP2 PUSH2 0x2FD JUMPI JUMPDEST POP PUSH2 0x2F2 JUMPI DUP3 MUL PUSH1 0x1 PUSH1 0x1 PUSH1 0xFF SHL SUB DUP2 GT PUSH2 0x2F2 JUMPI PUSH1 0x1 SHL SWAP3 DUP2 PUSH2 0x2C9 JUMPI JUMPDEST POP PUSH2 0x2C0 JUMPI DUP1 MUL SWAP1 DUP2 NOT DUP2 GT PUSH2 0x2C0 JUMPI ADD SWAP1 DUP1 DUP3 LT ISZERO PUSH2 0x2B8 JUMPI PUSH2 0x27B SWAP2 PUSH2 0x276 SWAP2 PUSH2 0x1A5 JUMP JUMPDEST PUSH2 0x3A4 JUMP JUMPDEST DUP2 DUP2 LT ISZERO PUSH2 0x2B1 JUMPI PUSH2 0x28D SWAP1 DUP3 PUSH2 0x1A5 JUMP JUMPDEST SWAP1 DUP2 ISZERO SWAP1 DUP2 ISZERO PUSH2 0x2A6 JUMPI JUMPDEST POP PUSH2 0x2A0 JUMPI SWAP1 JUMP JUMPDEST POP PUSH1 0x0 SWAP1 JUMP JUMPDEST SWAP1 POP DUP2 LT ISZERO CODESIZE PUSH2 0x298 JUMP JUMPDEST POP POP PUSH1 0x0 SWAP1 JUMP JUMPDEST POP POP POP PUSH1 0x0 SWAP1 JUMP JUMPDEST POP POP POP POP PUSH1 0x0 SWAP1 JUMP JUMPDEST SWAP1 POP PUSH2 0x2DC JUMPI DUP1 PUSH1 0x0 NOT DIV DUP2 GT CODESIZE PUSH2 0x24F JUMP JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x12 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST POP POP POP POP POP POP PUSH1 0x0 SWAP1 JUMP JUMPDEST SWAP1 POP PUSH2 0x2DC JUMPI DUP3 PUSH1 0x0 NOT DIV DUP2 GT DUP5 PUSH2 0x230 JUMP JUMPDEST POP POP POP POP POP PUSH1 0x0 SWAP1 JUMP JUMPDEST SWAP1 POP PUSH2 0x2DC JUMPI DUP5 PUSH1 0x0 NOT DIV DUP6 GT CODESIZE PUSH2 0x21F JUMP JUMPDEST POP DUP5 ISZERO PUSH2 0x210 JUMP JUMPDEST POP DUP4 ISZERO PUSH2 0x209 JUMP JUMPDEST DUP1 MLOAD ISZERO PUSH2 0x2A0 JUMPI PUSH1 0x0 DUP1 JUMPDEST DUP3 MLOAD DUP3 LT ISZERO PUSH2 0x395 JUMPI PUSH2 0x35B DUP3 DUP5 PUSH2 0x17B JUMP JUMPDEST MLOAD DUP1 ISZERO DUP1 ISZERO SWAP1 DUP2 PUSH2 0x382 JUMPI JUMPDEST POP PUSH2 0x2C0 JUMPI DUP1 MUL DUP1 NOT DUP3 GT PUSH2 0x2C0 JUMPI PUSH1 0x1 SWAP2 ADD SWAP2 ADD SWAP1 PUSH2 0x348 JUMP JUMPDEST SWAP1 POP PUSH2 0x2DC JUMPI DUP1 PUSH1 0x0 NOT DIV DUP2 GT CODESIZE PUSH2 0x367 JUMP JUMPDEST SWAP1 POP PUSH2 0x3A1 SWAP2 POP PUSH2 0x3A4 JUMP JUMPDEST SWAP1 JUMP JUMPDEST DUP1 ISZERO PUSH2 0x2A0 JUMPI PUSH1 0x1 DUP2 ADD DUP1 DUP3 GT PUSH2 0x1B2 JUMPI PUSH1 0x1 SHR DUP2 JUMPDEST DUP3 DUP3 LT PUSH2 0x3C6 JUMPI POP POP SWAP1 JUMP JUMPDEST SWAP1 SWAP2 POP DUP2 PUSH1 0x0 DUP2 ISZERO PUSH2 0x3E9 JUMPI POP DUP1 DUP3 DIV SWAP1 DUP2 ADD DUP1 SWAP2 GT PUSH2 0x1B2 JUMPI PUSH1 0x1 SHR SWAP1 PUSH2 0x3BA JUMP JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x12 PUSH1 0x4 MSTORE PUSH1 0x24 SWAP1 REVERT INVALID LOG2 PUSH5 0x6970667358 0x22 SLT KECCAK256 0xB1 CALLDATALOAD PUSH20 0xB530EBE0B20A9935C39991892D0811ABA0E4F1A7 0xC1 PUSH15 0x2F19ED5FDD80C864736F6C63430008 0x1E STOP CALLER ","sourceMap":"416:4249:0:-:0;;;;;;;;;;;;;;;;;"},"deployedBytecode":{"functionDebugData":{"abi_decode_array_uint256_dyn":{"entryPoint":234,"id":null,"parameterSlots":2,"returnSlots":1},"checked_sub_uint256":{"entryPoint":421,"id":null,"parameterSlots":2,"returnSlots":1},"fun_calculateRadius":{"entryPoint":829,"id":85,"parameterSlots":1,"returnSlots":1},"fun_solveTorusInvariant":{"entryPoint":456,"id":349,"parameterSlots":4,"returnSlots":1},"fun_sqrt":{"entryPoint":932,"id":398,"parameterSlots":1,"returnSlots":1},"memory_array_index_access_uint256_dyn":{"entryPoint":379,"id":null,"parameterSlots":2,"returnSlots":1}},"generatedSources":[],"immutableReferences":{},"linkReferences":{},"object":"6080604052600436101561001257600080fd5b60003560e01c806319be0803146100a257806350272f1c1461005f57636bec96e01461003d57600080fd5b3461005a57604036600319011261005a5760206040516004358152f35b600080fd5b3461005a57602036600319011261005a5760043567ffffffffffffffff811161005a5761009a61009560209236906004016100ea565b61033d565b604051908152f35b3461005a5761010036600319011261005a5760843567ffffffffffffffff811161005a5761009a6100d960209236906004016100ea565b60e4359060c4359060a435906101c8565b9080601f8301121561005a5781359167ffffffffffffffff8311610165578260051b9060405193601f19603f840116850185811067ffffffffffffffff82111761016557604052845260208085019282010192831161005a57602001905b8282106101555750505090565b8135815260209182019101610148565b634e487b7160e01b600052604160045260246000fd5b805182101561018f5760209160051b010190565b634e487b7160e01b600052603260045260246000fd5b919082039182116101b257565b634e487b7160e01b600052601160045260246000fd5b91825180156103105780831015610310578110156102c0578082146102c0576101f46101fb928461017b565b519261017b565b519180159081158281610335575b801561032d575b6103105784158015908161031a575b5061031057848002938184816102fd575b506102f25782026001600160ff1b0381116102f25760011b92816102c9575b506102c057800290811981116102c0570190808210156102b85761027b91610276916101a5565b6103a4565b818110156102b15761028d90826101a5565b9081159081156102a6575b506102a05790565b50600090565b905081101538610298565b5050600090565b505050600090565b50505050600090565b90506102dc57806000190481113861024f565b634e487b7160e01b600052601260045260246000fd5b505050505050600090565b90506102dc578260001904811184610230565b5050505050600090565b90506102dc57846000190485113861021f565b508415610210565b508315610209565b8051156102a0576000805b82518210156103955761035b828461017b565b51801580159081610382575b506102c0578002801982116102c05760019101910190610348565b90506102dc578060001904811138610367565b90506103a191506103a4565b90565b80156102a057600181018082116101b25760011c815b8282106103c657505090565b90915081600081156103e957508082049081018091116101b25760011c906103ba565b634e487b7160e01b81526012600452602490fdfea2646970667358221220b13573b530ebe0b20a9935c39991892d0811aba0e4f1a7c16e2f19ed5fdd80c864736f6c634300081e0033","opcodes":"PUSH1 0x80 PUSH1 0x40 MSTORE PUSH1 0x4 CALLDATASIZE LT ISZERO PUSH2 0x12 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST PUSH1 0x0 CALLDATALOAD PUSH1 0xE0 SHR DUP1 PUSH4 0x19BE0803 EQ PUSH2 0xA2 JUMPI DUP1 PUSH4 0x50272F1C EQ PUSH2 0x5F JUMPI PUSH4 0x6BEC96E0 EQ PUSH2 0x3D JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST CALLVALUE PUSH2 0x5A JUMPI PUSH1 0x40 CALLDATASIZE PUSH1 0x3 NOT ADD SLT PUSH2 0x5A JUMPI PUSH1 0x20 PUSH1 0x40 MLOAD PUSH1 0x4 CALLDATALOAD DUP2 MSTORE RETURN JUMPDEST PUSH1 0x0 DUP1 REVERT JUMPDEST CALLVALUE PUSH2 0x5A JUMPI PUSH1 0x20 CALLDATASIZE PUSH1 0x3 NOT ADD SLT PUSH2 0x5A JUMPI PUSH1 0x4 CALLDATALOAD PUSH8 0xFFFFFFFFFFFFFFFF DUP2 GT PUSH2 0x5A JUMPI PUSH2 0x9A PUSH2 0x95 PUSH1 0x20 SWAP3 CALLDATASIZE SWAP1 PUSH1 0x4 ADD PUSH2 0xEA JUMP JUMPDEST PUSH2 0x33D JUMP JUMPDEST PUSH1 0x40 MLOAD SWAP1 DUP2 MSTORE RETURN JUMPDEST CALLVALUE PUSH2 0x5A JUMPI PUSH2 0x100 CALLDATASIZE PUSH1 0x3 NOT ADD SLT PUSH2 0x5A JUMPI PUSH1 0x84 CALLDATALOAD PUSH8 0xFFFFFFFFFFFFFFFF DUP2 GT PUSH2 0x5A JUMPI PUSH2 0x9A PUSH2 0xD9 PUSH1 0x20 SWAP3 CALLDATASIZE SWAP1 PUSH1 0x4 ADD PUSH2 0xEA JUMP JUMPDEST PUSH1 0xE4 CALLDATALOAD SWAP1 PUSH1 0xC4 CALLDATALOAD SWAP1 PUSH1 0xA4 CALLDATALOAD SWAP1 PUSH2 0x1C8 JUMP JUMPDEST SWAP1 DUP1 PUSH1 0x1F DUP4 ADD SLT ISZERO PUSH2 0x5A JUMPI DUP2 CALLDATALOAD SWAP2 PUSH8 0xFFFFFFFFFFFFFFFF DUP4 GT PUSH2 0x165 JUMPI DUP3 PUSH1 0x5 SHL SWAP1 PUSH1 0x40 MLOAD SWAP4 PUSH1 0x1F NOT PUSH1 0x3F DUP5 ADD AND DUP6 ADD DUP6 DUP2 LT PUSH8 0xFFFFFFFFFFFFFFFF DUP3 GT OR PUSH2 0x165 JUMPI PUSH1 0x40 MSTORE DUP5 MSTORE PUSH1 0x20 DUP1 DUP6 ADD SWAP3 DUP3 ADD ADD SWAP3 DUP4 GT PUSH2 0x5A JUMPI PUSH1 0x20 ADD SWAP1 JUMPDEST DUP3 DUP3 LT PUSH2 0x155 JUMPI POP POP POP SWAP1 JUMP JUMPDEST DUP2 CALLDATALOAD DUP2 MSTORE PUSH1 0x20 SWAP2 DUP3 ADD SWAP2 ADD PUSH2 0x148 JUMP JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x41 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST DUP1 MLOAD DUP3 LT ISZERO PUSH2 0x18F JUMPI PUSH1 0x20 SWAP2 PUSH1 0x5 SHL ADD ADD SWAP1 JUMP JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x32 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST SWAP2 SWAP1 DUP3 SUB SWAP2 DUP3 GT PUSH2 0x1B2 JUMPI JUMP JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x11 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST SWAP2 DUP3 MLOAD DUP1 ISZERO PUSH2 0x310 JUMPI DUP1 DUP4 LT ISZERO PUSH2 0x310 JUMPI DUP2 LT ISZERO PUSH2 0x2C0 JUMPI DUP1 DUP3 EQ PUSH2 0x2C0 JUMPI PUSH2 0x1F4 PUSH2 0x1FB SWAP3 DUP5 PUSH2 0x17B JUMP JUMPDEST MLOAD SWAP3 PUSH2 0x17B JUMP JUMPDEST MLOAD SWAP2 DUP1 ISZERO SWAP1 DUP2 ISZERO DUP3 DUP2 PUSH2 0x335 JUMPI JUMPDEST DUP1 ISZERO PUSH2 0x32D JUMPI JUMPDEST PUSH2 0x310 JUMPI DUP5 ISZERO DUP1 ISZERO SWAP1 DUP2 PUSH2 0x31A JUMPI JUMPDEST POP PUSH2 0x310 JUMPI DUP5 DUP1 MUL SWAP4 DUP2 DUP5 DUP2 PUSH2 0x2FD JUMPI JUMPDEST POP PUSH2 0x2F2 JUMPI DUP3 MUL PUSH1 0x1 PUSH1 0x1 PUSH1 0xFF SHL SUB DUP2 GT PUSH2 0x2F2 JUMPI PUSH1 0x1 SHL SWAP3 DUP2 PUSH2 0x2C9 JUMPI JUMPDEST POP PUSH2 0x2C0 JUMPI DUP1 MUL SWAP1 DUP2 NOT DUP2 GT PUSH2 0x2C0 JUMPI ADD SWAP1 DUP1 DUP3 LT ISZERO PUSH2 0x2B8 JUMPI PUSH2 0x27B SWAP2 PUSH2 0x276 SWAP2 PUSH2 0x1A5 JUMP JUMPDEST PUSH2 0x3A4 JUMP JUMPDEST DUP2 DUP2 LT ISZERO PUSH2 0x2B1 JUMPI PUSH2 0x28D SWAP1 DUP3 PUSH2 0x1A5 JUMP JUMPDEST SWAP1 DUP2 ISZERO SWAP1 DUP2 ISZERO PUSH2 0x2A6 JUMPI JUMPDEST POP PUSH2 0x2A0 JUMPI SWAP1 JUMP JUMPDEST POP PUSH1 0x0 SWAP1 JUMP JUMPDEST SWAP1 POP DUP2 LT ISZERO CODESIZE PUSH2 0x298 JUMP JUMPDEST POP POP PUSH1 0x0 SWAP1 JUMP JUMPDEST POP POP POP PUSH1 0x0 SWAP1 JUMP JUMPDEST POP POP POP POP PUSH1 0x0 SWAP1 JUMP JUMPDEST SWAP1 POP PUSH2 0x2DC JUMPI DUP1 PUSH1 0x0 NOT DIV DUP2 GT CODESIZE PUSH2 0x24F JUMP JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x12 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT JUMPDEST POP POP POP POP POP POP PUSH1 0x0 SWAP1 JUMP JUMPDEST SWAP1 POP PUSH2 0x2DC JUMPI DUP3 PUSH1 0x0 NOT DIV DUP2 GT DUP5 PUSH2 0x230 JUMP JUMPDEST POP POP POP POP POP PUSH1 0x0 SWAP1 JUMP JUMPDEST SWAP1 POP PUSH2 0x2DC JUMPI DUP5 PUSH1 0x0 NOT DIV DUP6 GT CODESIZE PUSH2 0x21F JUMP JUMPDEST POP DUP5 ISZERO PUSH2 0x210 JUMP JUMPDEST POP DUP4 ISZERO PUSH2 0x209 JUMP JUMPDEST DUP1 MLOAD ISZERO PUSH2 0x2A0 JUMPI PUSH1 0x0 DUP1 JUMPDEST DUP3 MLOAD DUP3 LT ISZERO PUSH2 0x395 JUMPI PUSH2 0x35B DUP3 DUP5 PUSH2 0x17B JUMP JUMPDEST MLOAD DUP1 ISZERO DUP1 ISZERO SWAP1 DUP2 PUSH2 0x382 JUMPI JUMPDEST POP PUSH2 0x2C0 JUMPI DUP1 MUL DUP1 NOT DUP3 GT PUSH2 0x2C0 JUMPI PUSH1 0x1 SWAP2 ADD SWAP2 ADD SWAP1 PUSH2 0x348 JUMP JUMPDEST SWAP1 POP PUSH2 0x2DC JUMPI DUP1 PUSH1 0x0 NOT DIV DUP2 GT CODESIZE PUSH2 0x367 JUMP JUMPDEST SWAP1 POP PUSH2 0x3A1 SWAP2 POP PUSH2 0x3A4 JUMP JUMPDEST SWAP1 JUMP JUMPDEST DUP1 ISZERO PUSH2 0x2A0 JUMPI PUSH1 0x1 DUP2 ADD DUP1 DUP3 GT PUSH2 0x1B2 JUMPI PUSH1 0x1 SHR DUP2 JUMPDEST DUP3 DUP3 LT PUSH2 0x3C6 JUMPI POP POP SWAP1 JUMP JUMPDEST SWAP1 SWAP2 POP DUP2 PUSH1 0x0 DUP2 ISZERO PUSH2 0x3E9 JUMPI POP DUP1 DUP3 DIV SWAP1 DUP2 ADD DUP1 SWAP2 GT PUSH2 0x1B2 JUMPI PUSH1 0x1 SHR SWAP1 PUSH2 0x3BA JUMP JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL DUP2 MSTORE PUSH1 0x12 PUSH1 0x4 MSTORE PUSH1 0x24 SWAP1 REVERT INVALID LOG2 PUSH5 0x6970667358 0x22 SLT KECCAK256 0xB1 CALLDATALOAD PUSH20 0xB530EBE0B20A9935C39991892D0811ABA0E4F1A7 0xC1 PUSH15 0x2F19ED5FDD80C864736F6C63430008 0x1E STOP CALLER ","sourceMap":"416:4249:0:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;416:4249:0;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;416:4249:0;;;;;;;;;;;;;;;;;;;;:::i;:::-;;:::i;:::-;;;;;;;;;;;;;-1:-1:-1;;416:4249:0;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;-1:-1:-1;416:4249:0;;;;;-1:-1:-1;416:4249:0;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;1770:2583;;416:4249;;2367:26;;2363:40;;2417:39;;;;2413:53;;2480:40;;;2476:54;;2544:33;;;2540:47;;2612:30;2667:31;2612:30;;;:::i;:::-;416:4249;2667:31;;:::i;:::-;416:4249;;2755:7;;;:19;;:7;:19;;;1770:2583;2755:32;;;;1770:2583;2751:46;;3094:9;;;;:44;;;;1770:2583;3090:58;;;416:4249;;;3313:39;;;;;;1770:2583;3309:53;;;416:4249;;-1:-1:-1;;;;;3525:28:0;;3521:42;;416:4249;;3716:38;;;;1770:2583;3712:52;;;416:4249;;;;;3919:40;;3915:54;;416:4249;4033:18;;;;;4029:32;;4171:15;4126:17;;;;:::i;:::-;4171:15;:::i;:::-;4200;;;;4196:29;;4268:14;;;;:::i;:::-;4296:7;;;:21;;;;;1770:2583;4292:35;;;1770:2583;:::o;4292:35::-;4319:8;416:4249;4319:8;:::o;4296:21::-;4307:10;;;;;4296:21;;;4196:29;4217:8;;416:4249;4217:8;:::o;4029:32::-;4053:8;;;416:4249;4053:8;:::o;3915:54::-;3961:8;;;;416:4249;3961:8;:::o;3716:38::-;416:4249;;;;3114:17;;;416:4249;3727:27;;3716:38;;;416:4249;;;;;;;;;;;;3521:42;3555:8;;;;;;416:4249;3555:8;:::o;3313:39::-;416:4249;;;;3114:17;;;416:4249;3324:28;;3313:39;;;3090:58;3140:8;;;;;416:4249;3140:8;:::o;3094:44::-;416:4249;;;;3114:17;;;416:4249;3107:31;;3094:44;;;2755:32;2778:9;;;2755:32;;:19;2766:8;;;2755:19;;610:613;416:4249;;708:20;704:34;;416:4249;;849:3;416:4249;;828:19;;;;;884:11;;;;:::i;:::-;416:4249;917:6;;;;:35;;;;849:3;913:49;;;416:4249;;;;1047:36;;1043:50;;416:4249;;;849:3;416:4249;813:13;;;917:35;416:4249;;;;3114:17;;;416:4249;927:25;;917:35;;;828:19;;;1189:17;828:19;;1189:17;:::i;:::-;610:613;:::o;4408:255::-;4480:6;;4476:20;;4523:1;416:4249;;;;;;;4523:1;416:4249;4539:13;4569:5;;;;;;4648:8;;4408:255;:::o;4562:77::-;4590:5;;-1:-1:-1;4590:5:0;416:4249;;;;;;;;;4614:9;416:4249;;;;;;;4523:1;416:4249;4562:77;;;416:4249;-1:-1:-1;;;416:4249:0;;;;;;;"},"methodIdentifiers":{"calculateBoundaryTickS(uint256,uint256)":"6bec96e0","calculateRadius(uint256[])":"50272f1c","solveTorusInvariant(uint256,uint256,uint256,uint256,uint256[],uint256,uint256,uint256)":"19be0803"}},"metadata":"{\"compiler\":{\"version\":\"0.8.30+commit.73712a01\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"r\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"calculateBoundaryTickS\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256[]\",\"name\":\"reserves\",\"type\":\"uint256[]\"}],\"name\":\"calculateRadius\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"sum_interior_reserves\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"interior_consolidated_radius\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"boundary_consolidated_radius\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"boundary_total_k_bound\",\"type\":\"uint256\"},{\"internalType\":\"uint256[]\",\"name\":\"total_reserves\",\"type\":\"uint256[]\"},{\"internalType\":\"uint256\",\"name\":\"token_in_index\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"token_out_index\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"amount_in_after_fee\",\"type\":\"uint256\"}],\"name\":\"solveTorusInvariant\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"pure\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Matches the IOrbitalMathHelper interface expected by IntegratedOrbital.sol      Provides a spherical-invariant based approximation that is safe on EVM.      Returns 0 on any invalid/unsafe condition so the caller can fallback.\",\"kind\":\"dev\",\"methods\":{\"calculateBoundaryTickS(uint256,uint256)\":{\"details\":\"Simple approximation: use radius as s (kept for ABI compatibility)\"},\"calculateRadius(uint256[])\":{\"details\":\"Returns floor(sqrt(sum(reserve_i^2))) with basic overflow guards\"},\"solveTorusInvariant(uint256,uint256,uint256,uint256,uint256[],uint256,uint256,uint256)\":{\"details\":\"ABI must match exactly the signature used by OrbitalPool low-level call      Unused parameters are kept for ABI compatibility and future extensions.\"}},\"title\":\"OrbitalMathHelperEVM\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"calculateBoundaryTickS(uint256,uint256)\":{\"notice\":\"Calculates the s value for a boundary tick\"},\"calculateRadius(uint256[])\":{\"notice\":\"Calculates the radius of a tick from its reserves\"},\"solveTorusInvariant(uint256,uint256,uint256,uint256,uint256[],uint256,uint256,uint256)\":{\"notice\":\"Solves the (approximate) invariant to calculate swap output amount\"}},\"notice\":\"EVM Solidity implementation of the math helper used by OrbitalPool\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/OrbitalMathHelperEVM.sol\":\"OrbitalMathHelperEVM\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[],\"viaIR\":true},\"sources\":{\"contracts/OrbitalMathHelperEVM.sol\":{\"keccak256\":\"0x72d763c376ba02dec15ca619db83db257d8f68560813779cf372159b967d1e2c\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://4414a10b1036d9d3d2c381d0f6d056598c4cb1ce6a037d0ccc4ad535c121e452\",\"dweb:/ipfs/QmUGpUPFRnSthdLbDg9xePL8izMDgQUyhzG2o12jJZvdeE\"]}},\"version\":1}"}}}}}